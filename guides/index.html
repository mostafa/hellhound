<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="description" content="A fullstack, async framework for creating web applications using Clojure and Clojurescript">
<meta name="keywords" content="Clojure, Clojurescript, clj, cljs, framework, stream, web, aleph, stream processing, async, fullstack">
<meta name="author" content="Sameer Rahmani">
<title>HellHound Documentation</title>
<style>
@import url("https://fonts.googleapis.com/css?family=Open+Sans");
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #3f3f3f; padding: 0; margin: 0; font-family: "Open Sans", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #3f3f3f; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #3f3f3f; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #3f3f3f; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #727272; }

kbd { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; display: inline-block; color: #3f3f3f; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #7a2518; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #fff; padding: 1.25em; border-top: 1px solid #cececf; font-size: 0.9em; }

#footer-text { color: #3f3f3f; line-height: 1.44; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Open Sans", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock pre.prettyprint { border-width: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #3f3f3f; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.625em -1.25em; }

ul.inline > li { margin-left: 1.25em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #3f3f3f; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

dt, th.tableblock, td.content, div.footnote { text-rendering: optimizeLegibility; }

h1, h2, p, td.content, span.alt { letter-spacing: -0.01em; }

p strong, td.content strong, div.footnote strong { letter-spacing: -0.005em; }

p, blockquote, dt, td.content, span.alt { font-size: 1.0625rem; }

p { margin-bottom: 1.25rem; }

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }

.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -moz-box-shadow: 0 1px 4px #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }

.imageblock .title { text-align: center; }

.print-only { display: none !important; }

@media print { @page { margin: 1.25cm 0.75cm; }
  * { -moz-box-shadow: none !important; -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img, object, svg { page-break-inside: avoid; }
  thead { display: table-header-group; }
  svg { max-width: 100%; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
.videoblock { text-align: center; }

.videoblock iframe { border: 1px solid #bfbfbf; }

code b.conum {
  display: inline-block;
  color: #fff!important;
  background-color: rgba(0,0,0,.8);
  border-radius: 100px;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans","DejaVu Sans",sans-serif;
  font-style: normal;
  font-weight: bold;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>HellHound Documentation</h1>
<div class="details">
<span id="author" class="author">Sameer Rahmani</span><br>
<span id="email" class="email">&lt;<a href="mailto:lxsameer@gnu.org">lxsameer@gnu.org</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">HellHound Documentation</div>
<ul class="sectlevel1">
<li><a href="#_what_is_hellhound">1. What is HellHound?</a>
<ul class="sectlevel2">
<li><a href="#_goals">1.1. Goals</a></li>
</ul>
</li>
<li><a href="#_prerequisite">2. Prerequisite</a>
<ul class="sectlevel2">
<li><a href="#_commander_pattern">2.1. Commander Pattern</a></li>
<li><a href="#_manifold">2.2. Manifold</a></li>
<li><a href="#_deferred">2.3. Deferred</a></li>
<li><a href="#_stream">2.4. Stream</a></li>
</ul>
</li>
<li><a href="#_getting_started">3. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_installation">3.1. Installation</a></li>
</ul>
</li>
<li><a href="#_systems">4. Systems</a>
<ul class="sectlevel2">
<li><a href="#_overview">4.1. Overview</a></li>
<li><a href="#_components">4.2. Components</a></li>
<li><a href="#_workflow_2">4.3. Workflow</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Under development software</div>
<div class="paragraph">
<p>This software is not ready to use yet. It&#8217;s under heavy development
and reaches the alpha stage pretty soon. If you like to be part of this process please
leave us a message.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://github.com/Codamic/hellhound/raw/master/assets/hellhound-white.png" alt="HellHound">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_hellhound"><a class="anchor" href="#_what_is_hellhound"></a>1. What is HellHound?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>asd</p>
</div>
<div class="sect2">
<h3 id="_goals"><a class="anchor" href="#_goals"></a>1.1. Goals</h3>
<div class="paragraph">
<p><strong>HellHound</strong> is a fullstack Clojure/ClojureScript framework for creating async distributed web applications suitbale for stream processing.
Basically <strong>HellHound</strong> is a set of smaller tools to create such systems.</p>
</div>
<div class="paragraph">
<p>The goal is to create a tool which allows developers to focus on their business logic while it takes care of different aspect of a distributed
software in an opinionated way.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisite"><a class="anchor" href="#_prerequisite"></a>2. Prerequisite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before learning about <strong>HellHound</strong> and how to use it. You need to know about several concepts and libraries
which are heavily used in <strong>HellHound</strong>. If you already know about the following topics, you can safely skip
this chapter and jump to [Getting Started](../getting_started/README.md) guide.</p>
</div>
<div class="sect2">
<h3 id="_commander_pattern"><a class="anchor" href="#_commander_pattern"></a>2.1. Commander Pattern</h3>
<div class="paragraph">
<p>Have you ever hit a wall with REST? Does modeling your problem domain into CRUD-able entities feel like fitting
a square peg into a round hole? Perhaps instead of modeling our services like little databases, we should instead
model them like reactors over immutable event streams.</p>
</div>
<div class="paragraph">
<p>Commander pattern is an application architecture design which is the main idea behind <strong>HellHound</strong>. I highly recommend
to watch this video:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="800" height="600" src="https://www.youtube.com/embed/B1-gS0oEtYc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manifold"><a class="anchor" href="#_manifold"></a>2.2. Manifold</h3>
<hr>
<div class="paragraph">
<p>This library provides basic building blocks for asynchronous programming, and can be used as a translation layer
between libraries which use similar but incompatible abstractions. Manifold provides two core abstractions:
<strong>deferreds</strong>, which represent a single asynchronous value, and <strong>streams</strong>, which represent an ordered sequence
of asynchronous values.</p>
</div>
<div class="paragraph">
<p>HellHound uses manifolds almost everywhere so it&#8217;s a good idea learn about this fantastic library which brought to us
by <a href="https://github.com/ztellman">@ztellman</a> and the awesome <a href="https://github.com/ztellman/manifold/graphs/contributors">contributors</a>
of this library.</p>
</div>
<div class="paragraph">
<p>Long story short, <strong>Manifold</strong> library provides an awesome asynchronous values by <strong>deferreds</strong> and a super useful abstraction
for <strong>streams</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re interested in Manifold you might want to know about the <a href="http://aleph.io/manifold/rationale.html">rationale</a> behind it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deferred"><a class="anchor" href="#_deferred"></a>2.3. Deferred</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Most of the contents of this section extract from the original docs in <a href="http://aleph.io/manifold/deferreds.html">here</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A deferred in Manifold is similar to a Clojure promise:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">require</span> '[manifold.deferred <span class="symbol">:as</span> d])
<span class="predefined-constant">nil</span>

<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>'d

<span class="keyword">&gt;</span> (d/success! d <span class="symbol">:foo</span>)
<span class="predefined-constant">true</span>

<span class="keyword">&gt;</span> @d
<span class="symbol">:foo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, similar to Clojure&#8217;s futures, deferreds in Manifold can also represent errors. Crucially, they also allow for
callbacks to be registered, rather than simply blocking on dereferencing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>'d

<span class="keyword">&gt;</span> (d/error! d (Exception. <span class="string"><span class="delimiter">&quot;</span><span class="content">boom</span><span class="delimiter">&quot;</span></span>))
<span class="predefined-constant">true</span>

<span class="keyword">&gt;</span> @d
Exception<span class="error">:</span> boom</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>'d

<span class="keyword">&gt;</span> (d/on-realized d
    (<span class="keyword">fn</span> [x] (<span class="keyword">println</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">success!</span><span class="delimiter">&quot;</span></span> x))
    (<span class="keyword">fn</span> [x] (<span class="keyword">println</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">error!</span><span class="delimiter">&quot;</span></span> x)))
&lt;&lt; <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;

<span class="keyword">&gt;</span> (d/success! d <span class="symbol">:foo</span>)
success! <span class="symbol">:foo</span>
<span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_composing_with_deferreds"><a class="anchor" href="#_composing_with_deferreds"></a>2.3.1. composing with deferreds</h4>
<div class="paragraph">
<p>Callbacks are a useful building block, but they&#8217;re a painful way to create asynchronous workflows.  In practice, no one should ever use <code>on-realized</code>.</p>
</div>
<div class="paragraph">
<p>Instead, they should use <code>manifold.deferred/chain</code>, which chains together callbacks, left to right:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>'d

<span class="keyword">&gt;</span> (d/chain d <span class="keyword">inc</span> <span class="keyword">inc</span> <span class="keyword">inc</span> #(<span class="keyword">println</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">x + 3 =</span><span class="delimiter">&quot;</span></span> %))
&lt;&lt; <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;

<span class="keyword">&gt;</span> (d/success! d <span class="integer">0</span>)
x <span class="keyword">+</span> <span class="integer">3</span> <span class="keyword">=</span> <span class="integer">3</span>
<span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>chain</code> returns a deferred representing the return value of the right-most callback.  If any of the functions returns
a deferred or a value that can be coerced into a deferred, the chain will be paused until the deferred yields a value.</p>
</div>
<div class="paragraph">
<p>Values that can be coerced into a deferred include Clojure futures, Java futures, and Clojure promises.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>'d

<span class="keyword">&gt;</span> (d/chain d
    #(<span class="keyword">future</span> (<span class="keyword">inc</span> %))
    #(<span class="keyword">println</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">the future returned</span><span class="delimiter">&quot;</span></span> %))
&lt;&lt; <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;

<span class="keyword">&gt;</span> (d/success! d <span class="integer">0</span>)
the <span class="keyword">future</span> returned <span class="integer">1</span>
<span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If any stage in <code>chain</code> throws an exception or returns a deferred that yields an error, all subsequent stages are skipped,
and the deferred returned by <code>chain</code> yields that same error.  To handle these cases, you can use <code>manifold.deferred/catch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">d</span> (d/deferred))
<span class="error">#</span>p

<span class="keyword">&gt;</span> (<span class="keyword">-&gt;</span> d
    (d/chain <span class="keyword">dec</span> #(<span class="keyword">/</span> <span class="integer">1</span> %))
    (d/catch Exception #(<span class="keyword">println</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">whoops, that didn't work:</span><span class="delimiter">&quot;</span></span> %)))
&lt;&lt; <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;

<span class="keyword">&gt;</span> (d/success! d <span class="integer">1</span>)
whoops, that didn't work<span class="error">:</span> <span class="error">#</span>error {<span class="symbol">:cause</span> Divide by zero <span class="symbol">:via</span> [{<span class="symbol">:type</span> java.lang.ArithmeticException <span class="keyword">..</span><span class="keyword">.</span>
<span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the <code>&#8594;</code> threading operator, <code>chain</code> and <code>catch</code> can be easily and arbitrarily composed.</p>
</div>
<div class="paragraph">
<p>To combine multiple deferrable values into a single deferred that yields all their results, we can use <code>manifold.deferred/zip</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> @(d/zip (<span class="keyword">future</span> <span class="integer">1</span>) (<span class="keyword">future</span> <span class="integer">2</span>) (<span class="keyword">future</span> <span class="integer">3</span>))
(<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we can use <code>manifold.deferred/timeout!</code> to register a timeout on the deferred which will yield either a specified timeout value or
a <code>TimeoutException</code> if the deferred is not realized within <code>n</code> milliseconds.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> @(d/timeout!
     (d/future (Thread/sleep <span class="integer">1000</span>) <span class="symbol">:foo</span>)
     <span class="integer">100</span>
     <span class="symbol">:bar</span>)
<span class="symbol">:bar</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if a timeout is placed on a deferred returned by <code>chain</code>, the timeout elapsing will prevent any further stages from being executed.</p>
</div>
<div class="sect4">
<h5 id="_code_future_code_vs_code_manifold_deferred_future_code"><a class="anchor" href="#_code_future_code_vs_code_manifold_deferred_future_code"></a><code>future</code> vs <code>manifold.deferred/future</code></h5>
<div class="paragraph">
<p>Clojure&#8217;s futures can be treated as deferreds, as can Clojure&#8217;s promises.  However, since both of these abstractions use a blocking dereference,
in order for Manifold to treat it as an asynchronous deferred value it must allocate a thread.</p>
</div>
<div class="paragraph">
<p>Wherever possible, use <code>manifold.deferred/deferred</code> instead of <code>promise</code>, and <code>manifold.deferred/future</code> instead of <code>future</code>.  They will behave
identically to their Clojure counterparts (<code>deliver</code> can be used on a Manifold deferred, for instance), but allow for callbacks to be registered,
so no additional threads are required.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_let_flow"><a class="anchor" href="#_let_flow"></a>2.3.2. let-flow</h4>
<div class="paragraph">
<p>Let&#8217;s say that we have two services which provide us numbers, and want to get their sum.  By using <code>zip</code> and <code>chain</code> together, this is relatively straightforward:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">deferred-sum</span> []
  (<span class="keyword">let</span> [a (call-service-a)
        b (call-service-b)]
    (chain (zip a b)
      (<span class="keyword">fn</span> [[a b]]
        (<span class="keyword">+</span> a b)))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, this isn&#8217;t a very direct expression of what we&#8217;re doing.  For more complex relationships between deferred values,
our code will become even more difficult to understand.  In these cases, it&#8217;s often best to use <code>let-flow</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">defn</span> <span class="function">deferred-sum</span> []
  (let-flow [a (call-service-a)
             b (call-service-b)]
    (<span class="keyword">+</span> a b)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <code>let-flow</code>, we can treat deferred values as if they&#8217;re realized.  This is only true of values declared within or closed over by <code>let-flow</code>, however.  So we can do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">let</span> [a (<span class="keyword">future</span> <span class="integer">1</span>)]
  (let-flow [b (<span class="keyword">future</span> (<span class="keyword">+</span> a <span class="integer">1</span>))
             c (<span class="keyword">+</span> b <span class="integer">1</span>)]
    (<span class="keyword">+</span> c <span class="integer">1</span>)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>but not this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(let-flow [a (<span class="keyword">future</span> <span class="integer">1</span>)
           b (<span class="keyword">let</span> [c (<span class="keyword">future</span> <span class="integer">1</span>)]
                (<span class="keyword">+</span> a c))]
  (<span class="keyword">+</span> b <span class="integer">1</span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, <code>c</code> is declared within a normal <code>let</code> binding, and as such we can&#8217;t treat it as if it were realized.</p>
</div>
<div class="paragraph">
<p>It can be helpful to think of <code>let-flow</code> as similar to Prismatic&#8217;s
<a href="https://github.com/prismatic/plumbing#graph-the-functional-swiss-army-knife">Graph</a> library, except that the dependencies
between values are inferred from the code, rather than explicitly specified.  Comparisons to core.async&#8217;s goroutines are
less accurate, since <code>let-flow</code> allows for concurrent execution of independent paths within the bindings, whereas
operations within a goroutine are inherently sequential.</p>
</div>
<div class="sect4">
<h5 id="_code_manifold_deferred_loop_code"><a class="anchor" href="#_code_manifold_deferred_loop_code"></a><code>manifold.deferred/loop</code></h5>
<div class="paragraph">
<p>Manifold also provides a <code>loop</code> macro, which allows for asynchronous loops to be defined.  Consider
<code>manifold.stream/consume</code>, which allows a function to be invoked with each new message from a stream.  We can implement
similar behavior like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">(<span class="keyword">require</span>
  '[manifold.deferred <span class="symbol">:as</span> d]
  '[manifold.stream <span class="symbol">:as</span> s])

(<span class="keyword">defn</span> <span class="function">my-consume</span> [f stream]
  (d/loop []
    (d/chain (s/take! stream <span class="symbol">::drained</span>)

      <span class="comment">;; if we got a message, run it through `f`</span>
      (<span class="keyword">fn</span> [msg]
        (<span class="keyword">if</span> (<span class="keyword">identical?</span> <span class="symbol">::drained</span> msg)
          <span class="symbol">::drained</span>
          (f msg)))

      <span class="comment">;; wait for the result from `f` to be realized, and</span>
      <span class="comment">;; recur, unless the stream is already drained</span>
      (<span class="keyword">fn</span> [result]
        (<span class="keyword">when-not</span> (<span class="keyword">identical?</span> <span class="symbol">::drained</span> result)
          (d/recur))))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we define a loop which takes messages one at a time from <code>stream</code>, and passes them into <code>f</code>.  If <code>f</code> returns an unrealized value, the loop will pause until it&#8217;s realized.  To recur, we make sure the value returned from the final stage is <code>(manifold.deferred/recur &amp; args)</code>, which will cause the loop to begin again from the top.</p>
</div>
<div class="paragraph">
<p>While Manifold doesn&#8217;t provide anything as general purpose as core.async&#8217;s <code>go</code> macro, the combination of <code>loop</code> and <code>let-flow</code> can allow for the specification of highly intricate asynchronous workflows.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_custom_execution_models"><a class="anchor" href="#_custom_execution_models"></a>2.3.3. custom execution models</h4>
<div class="paragraph">
<p>Both deferreds and streams allow for custom execution models to be specified.  To learn more, //aleph.io/docs/execution.md[go here].</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stream"><a class="anchor" href="#_stream"></a>2.4. Stream</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="literalblock">
<div class="content">
<pre>Most of the contents of this section extract from the original docs in http://aleph.io/manifold/streams.html[here]</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Manifold stream can be created using <code>manifold.stream/stream</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">require</span> '[manifold.stream <span class="symbol">:as</span> s])
<span class="predefined-constant">nil</span>
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">s</span> (s/stream))
<span class="error">#</span>'s</code></pre>
</div>
</div>
<div class="paragraph">
<p>A stream can be thought of as two separate halves: a <strong>sink</strong>  which consumes messages, and a <strong>source</strong>  which produces them.
We can <code>put!</code> messages into the sink, and <code>take!</code> them from the source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (s/put! s <span class="integer">1</span>)
&lt;&lt; <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;
<span class="keyword">&gt;</span> (s/take! s)
&lt;&lt; <span class="integer">1</span> &gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that both <code>put!</code> and <code>take!</code> return //aleph.io/manifold/deferred.md[deferred values].  The deferred returned by <code>put!</code> will yield
<code>true</code> if the message was accepted by the stream, and <code>false</code> otherwise; the deferred returned by <code>take!</code> will yield the message.</p>
</div>
<div class="paragraph">
<p>Sinks can be <strong>closed</strong> by calling <code>close!</code>, which means they will no longer accept messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (s/close! s)
<span class="predefined-constant">nil</span>
<span class="keyword">&gt;</span> @(s/put! s <span class="integer">1</span>)
<span class="predefined-constant">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We can check if a sink is closed by calling <code>closed?</code>, and register a no-arg callback using <code>on-closed</code> to be notified when
the sink is closed.</p>
</div>
<div class="paragraph">
<p>Sources that will never produce any more messages (often because the corresponding sink is closed) are said to be <strong>drained</strong>.
We may check whether a source is drained via <code>drained?</code> and <code>on-drained</code>.</p>
</div>
<div class="paragraph">
<p>By default, calling <code>take!</code> on a drained source will yield a message of <code>nil</code>.  However, if <code>nil</code> is a valid message, we may
want to specify some other return value to denote that the source is drained:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> @(s/take! s <span class="symbol">::drained</span>)
<span class="symbol">::drained</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We may also want to put a time limit on how long we&#8217;re willing to wait on our put or take to complete.  For this, we can use
<code>try-put!</code> and <code>try-take!</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">s</span> (s/stream))
<span class="error">#</span>'s
<span class="keyword">&gt;</span> @(s/try-put! s <span class="symbol">:foo</span> <span class="integer">1000</span> <span class="symbol">::timeout</span>)
<span class="symbol">::timeout</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we try to put a message into the stream, but since there are no consumers, it will fail after waiting for 1000ms.  Here
we&#8217;ve specified <code>::timeout</code> as our special timeout value, otherwise it would simply return <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> @(s/try-take! s <span class="symbol">::drained</span> <span class="integer">1000</span> <span class="symbol">::timeout</span>)
<span class="symbol">::timeout</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, we specify the timeout and special timeout value.  When using <code>try-take!</code>, we must specify return values for both the
drained and timeout outcomes.</p>
</div>
<div class="sect3">
<h4 id="_stream_operators"><a class="anchor" href="#_stream_operators"></a>2.4.1. stream operators</h4>
<div class="paragraph">
<p>The simplest thing we can do a stream is consume every message that comes into it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (s/consume #(<span class="keyword">prn</span> 'message! %) s)
<span class="predefined-constant">nil</span>
<span class="keyword">&gt;</span> @(s/put! s <span class="integer">1</span>)
message! <span class="integer">1</span>
<span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, we can also create derivative streams using operators analogous to Clojure&#8217;s sequence operators, a full list of
which [can be found here](<a href="http://ideolalia.com/manifold/" class="bare">http://ideolalia.com/manifold/</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">-&gt;&gt;</span> [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>]
    s/-&gt;source
    (s/map <span class="keyword">inc</span>)
    s/stream-&gt;seq)
(<span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we&#8217;ve mapped <code>inc</code> over a stream, transforming from a sequence to a stream and then back to a sequence for the sake of
a concise example.  Note that calling <code>manifold.stream/map</code> on a sequence will automatically call <code>&#8594;source</code>, so we can actually omit that, leaving just:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">-&gt;&gt;</span> [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>]
    (s/map <span class="keyword">inc</span>)
    s/stream-&gt;seq)
(<span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since streams are not immutable, in order to treat it as a sequence we must do an explicit transformation via <code>stream&#8594;seq</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">-&gt;&gt;</span> [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>]
    s/-&gt;source
    s/stream-&gt;seq
    (<span class="keyword">map</span> <span class="keyword">inc</span>))
(<span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that we can create multiple derived streams from the same source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">s</span> (s/stream))
<span class="error">#</span>'s
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">a</span> (s/map <span class="keyword">inc</span> s))
<span class="error">#</span>'a
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">b</span> (s/map <span class="keyword">dec</span> s))
<span class="error">#</span>'b
<span class="keyword">&gt;</span> @(s/put! s <span class="integer">0</span>)
<span class="predefined-constant">true</span>
<span class="keyword">&gt;</span> @(s/take! a)
<span class="integer">1</span>
<span class="keyword">&gt;</span> @(s/take! b)
<span class="integer">-1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we create a source stream <code>s</code>, and map <code>inc</code> and <code>dec</code> over it.  When we put our message into <code>s</code> it immediately is accepted, since
<code>a</code> and <code>b</code> are downstream.  All messages put into <code>s</code> will be propagated into <strong>both</strong> <code>a</code> and <code>b</code>.</p>
</div>
<div class="paragraph">
<p>If <code>s</code> is closed, both <code>a</code> and <code>b</code> will be closed, as will any other downstream sources we&#8217;ve created.  Likewise, if everything downstream
of <code>s</code> is closed, <code>s</code> will also be closed.  This is almost always desirable, as failing to do this will simply cause <code>s</code> to exert
backpressure on everything upstream of it.  However, If we wish to avoid this behavior, we can create a <code>(permanent-stream)</code>, which cannot be closed.</p>
</div>
<div class="paragraph">
<p>For any Clojure operation that doesn&#8217;t have an equivalent in <code>manifold.stream</code>, we can use <code>manifold.stream/transform</code> with a transducer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">-&gt;&gt;</span> [<span class="integer">1</span> <span class="integer">2</span> <span class="integer">3</span>]
    (s/transform (<span class="keyword">map</span> <span class="keyword">inc</span>))
    s/stream-&gt;seq)
(<span class="integer">2</span> <span class="integer">3</span> <span class="integer">4</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s also <code>(periodically period f)</code>, which behaves like <code>(repeatedly f)</code>, but will emit the result of <code>(f)</code> every <code>period</code> milliseconds.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_streams"><a class="anchor" href="#_connecting_streams"></a>2.4.2. connecting streams</h4>
<div class="paragraph">
<p>Having created an event source through composition of operators, we will often want to feed all messages into a sink.  This can be
accomplished via <code>connect</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">a</span> (s/stream))
<span class="error">#</span>'a
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">b</span> (s/stream))
<span class="error">#</span>'b
<span class="keyword">&gt;</span> (s/connect a b)
<span class="predefined-constant">true</span>
<span class="keyword">&gt;</span> @(s/put! a <span class="integer">1</span>)
<span class="predefined-constant">true</span>
<span class="keyword">&gt;</span> @(s/take! b)
<span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, we see that our message is immediately accepted into <code>a</code>, and can be read from <code>b</code>.  We may also pass an options map into
<code>connect</code>, with any of the following keys:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>downstream?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether the source closing will close the sink, defaults to <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>upstream?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether the sink closing will close the source, <strong>even if there are other sinks downstream of the source</strong>, defaults to <code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the maximum time that will be spent waiting to convey a message into the sink before the connection is severed, defaults to <code>nil</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a description of the connection between the source and sink, useful for introspection purposes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Upon connecting two streams, we can inspect any of the streams using <code>description</code>, and follow the flow of data using <code>downstream</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">a</span> (s/stream))
<span class="error">#</span>'a
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">b</span> (s/stream))
<span class="error">#</span>'b
<span class="keyword">&gt;</span> (s/connect a b {<span class="symbol">:description</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">a connection</span><span class="delimiter">&quot;</span></span>})
<span class="predefined-constant">nil</span>
<span class="keyword">&gt;</span> (s/description a)
{<span class="symbol">:pending-puts</span> <span class="integer">0</span>, <span class="symbol">:drained?</span> <span class="predefined-constant">false</span>, <span class="symbol">:buffer-size</span> <span class="integer">0</span>, <span class="symbol">:permanent?</span> <span class="predefined-constant">false</span>, <span class="keyword">..</span><span class="keyword">.</span>}
<span class="keyword">&gt;</span> (s/downstream a)
([<span class="string"><span class="delimiter">&quot;</span><span class="content">a connection</span><span class="delimiter">&quot;</span></span> &lt;&lt; stream<span class="error">:</span> <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;])</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can recursively apply <code>downstream</code> to traverse the entire topology of our streams.  This can be a powerful way to reason about
the structure of our running processes, but sometimes we want to change the message from the source before it&#8217;s placed into the sink.
For this, we can use <code>connect-via</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">a</span> (s/stream))
<span class="error">#</span>'a
<span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">b</span> (s/stream))
<span class="error">#</span>'b
<span class="keyword">&gt;</span> (s/connect-via a #(s/put! b (<span class="keyword">inc</span> %)) b)
<span class="predefined-constant">nil</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>connect-via</code> takes an argument between the source and sink, which is a single-argument callback.  This callback will be
invoked with messages from the source, under the assumption that they will be propagated to the sink.  This is the underlying
mechanism for <code>map</code>, <code>filter</code>, and other stream operators; it allow us to create complex operations that are visible via <code>downstream</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><span class="keyword">&gt;</span> (<span class="keyword">def</span> <span class="function">a</span> (s/stream))
<span class="error">#</span>'a
<span class="keyword">&gt;</span> (s/map <span class="keyword">inc</span> a)
&lt;&lt; source<span class="error">:</span> <span class="keyword">..</span><span class="keyword">.</span> &gt;&gt;
<span class="keyword">&gt;</span> (s/downstream a)
([{<span class="symbol">:op</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">map</span><span class="delimiter">&quot;</span></span>} &lt;&lt; sink<span class="error">:</span> {<span class="symbol">:type</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">callback</span><span class="delimiter">&quot;</span></span>} &gt;&gt;])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each element returned by <code>downstream</code> is a 2-tuple, the first element describing the connection, and the second element describing
the stream it&#8217;s feeding into.</p>
</div>
<div class="paragraph">
<p>The value returned by the callback for <code>connect-via</code> provides backpressure - if a deferred value is returned, further messages will
not be passed in until the deferred value is realized.</p>
</div>
</div>
<div class="sect3">
<h4 id="_buffers_and_backpressure"><a class="anchor" href="#_buffers_and_backpressure"></a>2.4.3. buffers and backpressure</h4>
<div class="paragraph">
<p>We saw above that if we attempt to put a message into a stream, it won&#8217;t succeed until the value is taken out.  This is because the
default stream has no buffer; it simply conveys messages from producers to consumers.  If we want to create a stream with a buffer,
we can simply call <code>(stream buffer-size)</code>.  We can also call <code>(buffer size stream)</code> to create a buffer downstream of an existing stream.</p>
</div>
<div class="paragraph">
<p>We may also call <code>(buffer metric limit stream)</code>, if we don&#8217;t want to measure our buffer&#8217;s size in messages.  If, for instance, each
message is a collection, we could use <code>count</code> as our metric, and set <code>limit</code> to whatever we want the maximum aggregate count to be.</p>
</div>
<div class="paragraph">
<p>To limit the rate of messages from a stream, we can use <code>(throttle max-rate stream)</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_event_buses_and_publish_subscribe_models"><a class="anchor" href="#_event_buses_and_publish_subscribe_models"></a>2.4.4. event buses and publish/subscribe models</h4>
<div class="paragraph">
<p>Manifold provides a simple publish/subscribe mechanism in the <code>manifold.bus</code> namespace.  To create an event bus, we can use
<code>(event-bus)</code>.  To publish to a particular topic on that bus, we use <code>(publish! bus topic msg)</code>.  To get a stream representing
all messages on a topic, we can call <code>(subscribe bus topic)</code>.</p>
</div>
<div class="paragraph">
<p>Calls to <code>publish!</code> will return a deferred that won&#8217;t be realized until all streams have accepted the message.  By default,
all streams returned by <code>subscribe</code> are unbuffered, but we can change this by providing a <code>stream-generator</code> to <code>event-bus</code>,
such as <code>(event-bus #(stream 1e3))</code>.  A short example of how <code>event-bus</code> can be used in concert with the buffering and flow control
mechanisms [can be found here](<a href="https://youtu.be/1bNOO3xxMc0?t=1887" class="bare">https://youtu.be/1bNOO3xxMc0?t=1887</a>).
n</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>3. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installation"><a class="anchor" href="#_installation"></a>3.1. Installation</h3>
<div class="paragraph">
<p>Add <strong>HellHound</strong> to your dependencies as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure">[codamic/hellhound <span class="string"><span class="delimiter">&quot;</span><span class="content">1.0.0-SNAPSHOT</span><span class="delimiter">&quot;</span></span>]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_systems"><a class="anchor" href="#_systems"></a>4. Systems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At heart, <strong>HellHound</strong> created around the idea of systems. The basic idea is to describe the execution model and
dataflow of a program using data and let <strong>HellHound</strong> handles the rest. Systems are the first of <strong>HellHound</strong>
which you need to learn about.</p>
</div>
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>4.1. Overview</h3>
<div class="paragraph">
<p>Let&#8217;s take a quick conceptual look at <strong>HellHound Systems</strong>.</p>
</div>
<div class="sect3">
<h4 id="_execution_model"><a class="anchor" href="#_execution_model"></a>4.1.1. Execution model</h4>
<div class="paragraph">
<p>Systems composed by [<strong>Components</strong>]. A system knows how to start and stop components. It is also
responsible for managing dependencies between theme. Components are the smallest parts of a system whic are reusable.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/system.svg" alt="A very basic schema of a System">
</div>
<div class="title">Figure 1. A very basic schema of a System</div>
</div>
<div class="paragraph">
<p>A <strong>HellHound</strong> system is basically a <code>map</code> describing different aspects of a program. Each program might have several
systems. For example a development system and a production system. But there would be just a system running at a given
time.</p>
</div>
<div class="paragraph">
<p>Systems should follow a certain spec (<code>:hellhound.system/system</code>). For example any system should have a`:components` key
with a vector as its value. All the <code>components</code>of the system should be defined under this key. Each component is a <code>map</code>
describing the behaviours of that component (For more info on components read [here](./Components.md)).</p>
</div>
<div class="paragraph">
<p>In order to use <strong>HellHound</strong> systems. First you need to define your system by defining a map with at least one key. Yupe,
you guessed it correctly, the <code>:components</code> key. We&#8217;re going to discuss the system&#8217;s keys in bit. So for now just let&#8217;s
talk about how to start and stop a system.</p>
</div>
<div class="paragraph">
<p>After defining the system. The next step would be to set the defined system as the default system of your program by using
<code>hellhound.system/set-system!</code> function. This function accepts just one argument which is the system map. It basically
analayze the given map and set it as the default system of the program. From now on, you can call <code>hellhound.system/start</code>
and <code>hellhound.system/stop</code> function.</p>
</div>
<div class="paragraph">
<p>Basic execution flows of a system are <code>start</code> and <code>stop</code>. Both of them creates a graph from the system components and their
dependencies. Then they <code>start</code>/<code>stop</code> the system by walking through that graph and calling the <code>start-fn</code> and <code>stop-fn</code>
function of each component.</p>
</div>
<div class="paragraph">
<p>After starting a system, you can access the running system via <code>hellhound.system/system</code> function. It would returns a map
describing the current running system including all the running components.</p>
</div>
<div class="paragraph">
<p>There are two ways to manage dependencies in your components code. The first one via a the system map itself, by treating
the system map as a repository of dependencies. The second way is via dependency injection model which is not supported
at this version (<code>v1.0.0</code>). Anyway, any component can pull what ever it needs from the system map by calling
<code>hellhound.system/get-component</code> function and passing the component name to it. This function will simply look for the
component in system map and returns the running component map. There is a huge problem with this apparoach. By using this
apparoach components knows too much about the environment around them, so it reduce their portablity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In near future we&#8217;re going to add the support for dependency injection to <strong>HellHound</strong> systems.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/system-deps.svg" alt="A schema of components of a system and how they might depends on each other">
</div>
<div class="title">Figure 2. A schema of components of a system and how they might depends on each other</div>
</div>
</div>
<div class="sect3">
<h4 id="_workflow"><a class="anchor" href="#_workflow"></a>4.1.2. Workflow</h4>
<div class="paragraph">
<p>System&#8217;s workflow describes the dataflow of the system. It describes where data comes in and where information goes out of
the system. By "where" I mean which component of the system. As mentioned before each <strong>HellHound</strong> [Component](./Components.md)
has an <strong>input stream</strong> and an <strong>output stream</strong> assigned to them. You can think of each component as a pipe, the whole
system as a pipeline. Data flows to this pipeline based on your piping (description) from entry points and exits the pipeline
from exit points. Pipeline might have more than one entry or exit points or none at all.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/component-io.svg" alt="Components process the input stream and produce the output put stream">
</div>
<div class="title">Figure 3. Components process the input stream and produce the output put stream</div>
</div>
<div class="paragraph">
<p>Using the system workflow you can design an open or a close dataflow for your system. A Close system is a type of system
which all of its components have their <strong>input</strong> and <strong>output</strong> connected. In the other hand, an open system is a type of
system which <strong>NOT</strong> all of the <strong>inputs</strong> and <strong>outputs</strong> of components connected to each other.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/workflow-types.svg" alt="Open system on the left and Close system on the right">
</div>
<div class="title">Figure 4. Open system on the left and Close system on the right</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Don&#8217;t confuse Input and Output of each component which components dependencies.</div>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Components of a system should consum from their <code>INPUT</code> and produce their <code>OUTPUT</code> in non-blocking fashion in order to avoid
blocking in a system.</p>
</div>
<div class="paragraph">
<p>Check out the [workflow](./Workflow.md) section for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_components"><a class="anchor" href="#_components"></a>4.2. Components</h3>
<div class="paragraph">
<p>A <strong>Component</strong> is a datastructure to managing the lifecycle, dependencies
and dataflow of a program.</p>
</div>
<div class="paragraph">
<p>A component is similar in spirit to the definition of an object in Object-Oriented Programming.
This does not alter the primacy of pure functions and immutable data structures in Clojure as
a language. Most functions are just functions, and most data are just data. Components are intended
to help manage stateful resources within a functional paradigm.</p>
</div>
<div class="sect3">
<h4 id="_advantages_of_the_component_model"><a class="anchor" href="#_advantages_of_the_component_model"></a>4.2.1. Advantages of the Component Model</h4>
<div class="paragraph">
<p>Large applications often consist of many stateful processes which must be started and stopped in
a particular order. The component model makes those relationships explicit and declarative, instead
of implicit in imperative code.</p>
</div>
<div class="paragraph">
<p>Components provide some basic guidance for structuring a <strong>HellHound</strong> application, with boundaries
between different parts of a system. Components offer some encapsulation, in the sense of grouping
together related entities. Each component receives references only to the things it needs, avoiding
unnecessary shared state. Instead of reaching through multiple levels of nested maps, a component
can have everything it needs at most one map lookup away.</p>
</div>
<div class="paragraph">
<p>Instead of having mutable state (atoms, refs, etc.) scattered throughout different namespaces, all
the stateful parts of an application can be gathered together. In some cases, using components may
eliminate the need for mutable references altogether, for example to store the "current" connection
to a resource such as a database. At the same time, having all state reachable via a single
[<strong>system</strong>](./README.md#overview) map makes it easy to reach in and inspect any part of the application
from the REPL.</p>
</div>
<div class="paragraph">
<p>The component dependency model makes it easy to swap in <strong>stub</strong> or <strong>mock</strong> implementations of a component
for testing purposes, without relying on time-dependent constructs, such as with-redefs or binding, which are
often subject to race conditions in multi-threaded code.</p>
</div>
<div class="paragraph">
<p>Having a coherent way to set up and tear down all the state associated with an application enables rapid
development cycles without restarting the JVM. It can also make unit tests faster and more independent,
since the cost of creating and starting a system is low enough that every test can create a new instance
of the system.</p>
</div>
</div>
<div class="sect3">
<h4 id="_disadvantages_of_the_component_model"><a class="anchor" href="#_disadvantages_of_the_component_model"></a>4.2.2. Disadvantages of the Component Model</h4>
<div class="paragraph">
<p>For small applications, declaring the dependency relationships among components may actually be more work than
manually starting all the components in the correct order or even not using component model at all. Everything
comes at a price.</p>
</div>
<div class="paragraph">
<p>The [<strong>system</strong>](./README.md#overview) map produced by <strong>HellHound</strong> is a complex map and it is typically too
large to inspect visually. But there are enough helper functions in <code>hellhound.system`</code> namespace to help
you with it.</p>
</div>
<div class="paragraph">
<p>You must explicitly specify all the dependency relationships among components: the code cannot discover these
relationships automatically.</p>
</div>
<div class="paragraph">
<p>Finally, <strong>HellHound</strong> system forbids cyclic dependencies among components. I believe that cyclic dependencies
usually indicate architectural flaws and can be eliminated by restructuring the application. In the rare case
where a cyclic dependency cannot be avoided, you can use mutable references to manage it, but this is outside
the scope of components.</p>
</div>
</div>
<div class="sect3">
<h4 id="_usage"><a class="anchor" href="#_usage"></a>4.2.3. Usage</h4>
<div class="paragraph">
<p>Components are the main parts of HellHound systems. Basically each components is an implementation of <code>IComponent</code>
protocol. The protocol which defines a component functionality. By default HellHound implements <code>IComponent</code>
protocols for hashmaps only. So we can define components in form of maps.</p>
</div>
<div class="paragraph">
<p>In order to define a component a map should should contains following keys (All the keys should be namespaced
keyword under <code>hellhound.component</code>):</p>
</div>
<div class="sect4">
<h5 id="_code_name_code"><a class="anchor" href="#_code_name_code"></a><code>name</code>:</h5>
<div class="paragraph">
<p>The name of the component. It should be a namespaced keyword.
This key is <strong>mandatory</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_start_fn_code"><a class="anchor" href="#_code_start_fn_code"></a><code>start-fn</code>:</h5>
<div class="paragraph">
<p>A function which takes the component map as the only argument
and return the component with the necessary keys attached to it. This
function is responsible for <strong>starting</strong> the component.
This key is <strong>mandatory</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_stop_fn_code"><a class="anchor" href="#_code_stop_fn_code"></a><code>stop-fn</code>:</h5>
<div class="paragraph">
<p>A function which takes the component map as the only argument
and return the component with the necessary keys attached to it. This
function is responsible for <strong>stoping</strong> the component.
This key is <strong>mandatory</strong>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_depends_on_code"><a class="anchor" href="#_code_depends_on_code"></a><code>depends-on</code>:</h5>
<div class="paragraph">
<p>This key specifies all the components which are the
 dependencies of the current component. A collection  of components
name.
This key is optional.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_input_stream_fn_code"><a class="anchor" href="#_code_input_stream_fn_code"></a><code>input-stream-fn</code>:</h5>
<div class="paragraph">
<p>A function which returns a <code>manifold</code> as the input
of the component. You rarely need to use this key for a component.
This key optional.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_output_stream_fn_code"><a class="anchor" href="#_code_output_stream_fn_code"></a><code>output-stream-fn</code>:</h5>
<div class="paragraph">
<p>A function which returns a <code>manifold</code> as the output
of the component. You rarely need to use this key for a component.
This key optional.</p>
</div>
<div class="paragraph">
<p>So as an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>(<span class="keyword">def</span> <span class="function">sample-component</span>
  {<span class="symbol">:hellhound.component/name</span> <span class="symbol">:sample.core/component-A</span>
   <span class="symbol">:hellhound.component/start-fn</span> (<span class="keyword">fn</span> [component] component)
   <span class="symbol">:hellhound.component/stop-fn</span> (<span class="keyword">fn</span> [component] component)
   <span class="symbol">:hellhound.component/depends-on</span> [<span class="symbol">:sample.core/component-B</span>]})</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <code>start-fn</code> and <code>stop-fn</code> don&#8217;t do anything.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structure"><a class="anchor" href="#_structure"></a>4.2.4. Structure</h4>
<div class="paragraph">
<p>Here is the a list of component&#8217;s keys:</p>
</div>
<div class="sect4">
<h5 id="_code_hellhound_component_name_code"><a class="anchor" href="#_code_hellhound_component_name_code"></a><code>:hellhound.component/name</code></h5>
<div class="paragraph">
<p>The name of the component.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_hellhound_component_start_fn_code"><a class="anchor" href="#_code_hellhound_component_start_fn_code"></a><code>:hellhound.component/start-fn</code></h5>
<div class="paragraph">
<p>A <strong>function</strong> which is responsible to start the component. This function should accept two parameters.
The first one simply is the <strong>component map itself</strong> and the second one is <strong>context map</strong> which contains
some data to be used inside the component. For example <strong>input</strong> stream.</p>
</div>
<div class="paragraph">
<p>The <strong>start-fn</strong> basically <strong>should return</strong> the component map and attach any state necessary to it. Also
if the component has any <strong>output</strong> stream is should associate the <sub>:output</sub> with the <strong>output</strong> stream value.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_hellhound_component_stop_fn_code"><a class="anchor" href="#_code_hellhound_component_stop_fn_code"></a><code>:hellhound.component/stop-fn</code></h5>
<div class="paragraph">
<p>This function is responsible for stopping the component and it gets only one argument which is the <strong>component map</strong>
again and should return the stopped component map as the return value.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_hellhound_component_depends_on_code"><a class="anchor" href="#_code_hellhound_component_depends_on_code"></a><code>:hellhound.component/depends-on</code></h5>
<div class="paragraph">
<p>An array of component names which the current component is depends on.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_workflow_2"><a class="anchor" href="#_workflow_2"></a>4.3. Workflow</h3>
<div class="paragraph">
<p>System&#8217;s workflow a vector describing the dataflow of the system. Components have an input and an output stream. Each
stream is a`manifold.stream`. HellHound connects io of each component to another component based on the desciption given
by the <code>:workflow</code> of the system.</p>
</div>
<div class="paragraph">
<p>System&#8217;s workflow is a vector of vectors. Each vector contains two mandatory element which are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The name of the output component</p>
</li>
<li>
<p>The name of the input component</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, consider the following system:</p>
</div>
<div class="listingblock">
<div class="title">A HellHound system</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="clojure"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>(<span class="keyword">ns</span> <span class="namespace">example.system</span>
  <span class="comment">;; We want to use defcomponenet to define the components instead of defining the maps</span>
  (<span class="symbol">:require</span> [hellhound.system <span class="symbol">:refer</span> [defcomponent]]))

<span class="comment">;; We skipped the the start and stop function of each component because it's not</span>
<span class="comment">;; related to this topic.</span>
(<span class="keyword">def</span> <span class="function">example-system</span>
     {<span class="symbol">:components</span> [(defcomponent <span class="symbol">:component-1</span> some-start-fn some-stop-fn)   <i class="conum" data-value="1"></i><b>(1)</b>
                   (defcomponent <span class="symbol">:component-2</span> some-other-start-fn some-other-stop-fn)    <i class="conum" data-value="2"></i><b>(2)</b>
                   (defcomponent <span class="symbol">:component-3</span> yet-another-start-fn yet-another-stop-fn)] <i class="conum" data-value="3"></i><b>(3)</b>

      <span class="symbol">:workflow</span> [[<span class="symbol">:component-1</span> <span class="symbol">:component-2</span>]    <i class="conum" data-value="4"></i><b>(4)</b>
                 [<span class="symbol">:component-2</span> <span class="symbol">:component-3</span>]]}) <i class="conum" data-value="5"></i><b>(5)</b></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Definition of <code>component-1</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Definition of <code>component-2</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Definition of <code>component-2</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Description to connect output of <code>component-1</code> to input <code>component-2</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Description to connect output of <code>component-2</code> to input <code>component-3</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the above snippet we defined three different components. For the sake of simplicity I skipped the start and
stop function defination of each component.</p>
</div>
<div class="paragraph">
<p>After starting the system defined in the above snippet, <strong>HellHound</strong> wires the input/output of each component
as we described in the system.</p>
</div>
<div class="paragraph">
<p>and an optional predicate function. This function connects the output stream of output component to input stream of
input component, and in case of existance of a predicate function, it only sends those messages which pass the predicate.</p>
</div>
<div class="paragraph">
<p>Predicate function should be a pure function obviousely.</p>
</div>
<div class="paragraph">
<p>Each component shoud have one <strong>INPUT</strong> and <strong>OUTPUT</strong> which should be stream of values. Input should be passed
to the component <code>start-fn</code> using <code>context</code> map and oputput should be return as the value of <code>:output</code> key
in the component map.</p>
</div>
</div>
</div>
</div>
</div>
<footer id="footer">
  Copyright <a href="//codamic.tech">Codamic Technologies</a> - 2017
</footer>
</body>
</html>